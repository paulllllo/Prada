/*! For license information please see main.273e9b839e5c7e7e6d17.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateprada("main",{"./styles/index.scss":(e,t,s)=>{s.r(t);var i=s("./node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js")(e.id,{publicPath:"",locals:!1});e.hot.dispose(i),e.hot.accept(void 0,i)},"./app/components/Canvas/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s("./node_modules/ogl/src/core/Renderer.js"),o=s("./node_modules/ogl/src/core/Camera.js"),h=s("./node_modules/ogl/src/core/Transform.js"),n=s("./app/components/Canvas/Home/index.js"),l=s("./app/components/Canvas/About/index.js"),a=s("./app/components/Canvas/Collections/index.js"),c=s("./app/components/Canvas/transition.js"),r=s("./app/components/Canvas/Detail/index.js");class d{constructor({template:e}){this.template=e,this.createRenderer(),this.createCamera(),this.createScene(),this.onResize(),this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0}}createRenderer(){this.renderer=new i.Renderer({alpha:!0,antiAliasing:!0}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new o.Camera(this.gl),this.camera.position.z=5}createScene(){this.scene=new h.Transform}createHome(){this.home=new n.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyHome(){this.home&&(this.home.destroy(),this.home=null,console.log("destroy home!"))}createAbout(){this.about=new l.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyAbout(){this.about&&(this.about.destroy(),this.about=null,console.log("destroy about!"))}createCollections(){this.collections=new a.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyCollections(){this.collections&&(this.collections.destroy(),this.collections=null)}createDetail(){this.detail=new r.default({gl:this.gl,scene:this.scene,sizes:this.sizes,transition:this.transition})}destroyDetail(){this.detail&&(this.detail.destroy(),this.detail=null)}onPreloaded(){this.onPageChangeEnd(this.template)}onPageChangeStart(e,t){this.collections&&this.collections.hide(),this.about&&this.about.hide(),this.home&&this.home.hide(),this.detail&&this.detail.hide(),this.fromCollectionsToDetail="collections"===this.template&&t.indexOf("detail")>-1,this.fromDetailToCollections="detail"===this.template&&t.indexOf("collections")>-1,(this.fromCollectionsToDetail||this.fromDetailToCollections)&&(this.transition=new c.default({collections:this.collections,url:t,gl:this.gl,scene:this.scene,sizes:this.sizes}),this.transition.setElement(this.collections||this.detail))}onPageChangeEnd(e){"collections"===e?this.createCollections():this.collections&&this.destroyCollections(),"Detail"===e?this.createDetail():this.detail&&this.destroyDetail(),"about"===e?this.createAbout():this.about&&this.destroyAbout(),"home"===e?this.createHome():this.home&&this.destroyHome()}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const e=this.camera.fov*(Math.PI/180),t=2*Math.tan(e/2)*this.camera.position.z,s=t*this.camera.aspect;this.sizes={height:t,width:s};const i={sizes:this.sizes};this.collections&&this.collections.onResize(i),this.detail&&this.detail.onResize(i),this.about&&this.about.onResize(i),this.home&&this.home.onResize(i)}onTouchDown(e){this.isDown=!0,this.x.start=e.touches?e.touches[0].clientX:e.clientX,this.y.start=e.touches?e.touches[0].clientY:e.clientY;const t={x:this.x,y:this.y};this.collections&&this.collections.onTouchDown&&this.collections.onTouchDown(t),this.detail&&this.detail.onTouchDown&&this.detail.onTouchDown(t),this.about&&this.about.onTouchDown&&this.about.onTouchDown(t),this.home&&this.home.onTouchDown&&this.home.onTouchDown(t)}onTouchMove(e){if(!this.isDown)return;const t=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.collections&&this.collections.onTouchMove&&this.collections.onTouchMove(i),this.detail&&this.detail.onTouchMove&&this.detail.onTouchMove(i),this.about&&this.about.onTouchMove&&this.about.onTouchMove(i),this.home&&this.home.onTouchMove&&this.home.onTouchMove(i)}onTouchUp(e){this.isDown=!1;const t=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.collections&&this.collections.onTouchUp&&this.collections.onTouchUp(i),this.detail&&this.detail.onTouchUp&&this.detail.onTouchUp(i),this.about&&this.about.onTouchUp&&this.about.onTouchUp(i),this.home&&this.home.onTouchUp&&this.home.onTouchUp(i)}onWheel(e){this.collections&&this.collections.onWheel(e),this.home&&this.home.onWheel(e)}update(e){this.collections&&this.collections.update(e),this.detail&&this.detail.update(e),this.about&&this.about.update(e),this.home&&this.home.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}},"./app/components/Canvas/transition.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var i=s("./node_modules/gsap/index.js"),o=s("./node_modules/ogl/src/extras/Plane.js"),h=s("./node_modules/ogl/src/core/Program.js"),n=s("./node_modules/ogl/src/core/Mesh.js"),l=s("./app/shaders/plane-vertex.glsl"),a=s("./app/shaders/plane-fragment.glsl");const c=class{constructor({collections:e,gl:t,scene:s,sizes:i,url:h}){this.collections=e,this.gl=t,this.url=h,this.scene=s,this.sizes=i,this.geometry=new o.Plane(this.gl),this.extra={x:0,y:0}}createProgram(e){this.program=new h.Program(this.gl,{fragment:a.default,vertex:l.default,uniforms:{uAlpha:{value:1},tMap:{value:e}}})}createMesh(e){this.mesh=new n.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.scale.x=e.scale.x,this.mesh.scale.y=e.scale.y,this.mesh.scale.z=e.scale.z,this.mesh.position.x=e.position.x,this.mesh.position.y=e.position.y,this.mesh.position.z=.01*e.position.z,this.mesh.setParent(this.scene)}setElement(e){if(console.log("element***",e),"collections"===e.id){const{index:t,medias:s}=e,i=s[t];this.createProgram(i.texture),this.createMesh(i.mesh),this.transition="detail"}else this.createProgram(e.texture),this.createMesh(e),this.transition="collections"}animate(e,t){i.default.timeline({onComplete}).to(this.mesh.scale,{duration:1.5,ease:"expo.inOut"})}}}},(function(e){e.h=()=>"65df758939d5ae1aaec0"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFDckNMLEtBQUsrRixLQUFLMUUsU0FBU1osRUFBSXNGLEVBQUsxRSxTQUFTWixFQUNyQ1QsS0FBSytGLEtBQUsxRSxTQUFTQyxFQUFzQixJQUFsQnlFLEVBQUsxRSxTQUFTQyxFQUVyQ3RCLEtBQUsrRixLQUFLRyxVQUFVbEcsS0FBS3VCLE1BQzdCLENBRUFnQyxVQUFBQSxDQUFZNEMsR0FFUixHQURBcEUsUUFBUUMsSUFBSSxhQUFjbUUsR0FDUCxnQkFBZkEsRUFBUTNHLEdBQXNCLENBQzlCLE1BQU0sTUFBRTRHLEVBQUssT0FBRUMsR0FBV0YsRUFDcEJHLEVBQVFELEVBQU9ELEdBRXJCcEcsS0FBS29GLGNBQWNrQixFQUFNakIsU0FDekJyRixLQUFLOEYsV0FBV1EsRUFBTVAsTUFFdEIvRixLQUFLNEMsV0FBYSxRQUN0QixNQUNJNUMsS0FBS29GLGNBQWNlLEVBQVFkLFNBQzNCckYsS0FBSzhGLFdBQVdLLEdBRWhCbkcsS0FBSzRDLFdBQWEsYUFFMUIsQ0FHQTJELE9BQUFBLENBQVNSLEVBQU1TLEdBQ01DLEVBQUFBLFFBQUtDLFNBQVMsQ0FDM0JDLGFBR0tDLEdBQUc1RyxLQUFLK0YsS0FBS0UsTUFBTyxDQUN6QlksU0FBVSxJQUNWQyxLQUFNLGNBR2Qsa0JDakZKQyxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhZGEvLi9zdHlsZXMvaW5kZXguc2Nzcz9mMGZmIiwid2VicGFjazovL3ByYWRhLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWRhLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL3RyYW5zaXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhZGEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9O1xuICAgIGlmKG1vZHVsZS5ob3QpIHtcbiAgICAgIC8vIDE3MjM3MTg3NDg4NTRcbiAgICAgIHZhciBjc3NSZWxvYWQgPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvaG1yL2hvdE1vZHVsZVJlcGxhY2VtZW50LmpzXCIpKG1vZHVsZS5pZCwge1wicHVibGljUGF0aFwiOlwiXCIsXCJsb2NhbHNcIjpmYWxzZX0pO1xuICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGNzc1JlbG9hZCk7XG4gICAgICBtb2R1bGUuaG90LmFjY2VwdCh1bmRlZmluZWQsIGNzc1JlbG9hZCk7XG4gICAgfVxuICAiLCJpbXBvcnQgeyBDYW1lcmEsIFJlbmRlcmVyLCBUcmFuc2Zvcm0gfSBmcm9tICdvZ2wnXG5pbXBvcnQgSG9tZSBmcm9tICcuL0hvbWUvaW5kZXguanMnXG5pbXBvcnQgQWJvdXQgZnJvbSAnLi9BYm91dC9pbmRleC5qcydcbmltcG9ydCBDb2xsZWN0aW9ucyBmcm9tICcuL0NvbGxlY3Rpb25zL2luZGV4LmpzJ1xuaW1wb3J0IFRyYW5zaXRpb24gZnJvbSAnLi90cmFuc2l0aW9uLmpzJ1xuaW1wb3J0IERldGFpbCBmcm9tICcuL0RldGFpbC9pbmRleC5qcydcblxuLy8gaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIHtcbiAgICBjb25zdHJ1Y3RvciAoeyB0ZW1wbGF0ZSB9KSB7XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZVxuXG4gICAgICAgIHRoaXMuY3JlYXRlUmVuZGVyZXIoKVxuICAgICAgICB0aGlzLmNyZWF0ZUNhbWVyYSgpXG4gICAgICAgIHRoaXMuY3JlYXRlU2NlbmUoKVxuXG4gICAgICAgIHRoaXMub25SZXNpemUoKVxuXG4gICAgICAgIC8vIHRoaXMub25QYWdlQ2hhbmdlRW5kKHRoaXMudGVtcGxhdGUpXG4gICAgICAgIC8vIHRoaXMuY3JlYXRlSG9tZSgpXG5cbiAgICAgICAgdGhpcy54ID0ge1xuICAgICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcbiAgICAgICAgICAgIGVuZDogMFxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy55ID0ge1xuICAgICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcbiAgICAgICAgICAgIGVuZDogMFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlUmVuZGVyZXIgKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHtcbiAgICAgICAgICAgIGFscGhhOiB0cnVlLFxuICAgICAgICAgICAgYW50aUFsaWFzaW5nOiB0cnVlXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5nbCA9IHRoaXMucmVuZGVyZXIuZ2xcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZ2wuY2FudmFzKVxuICAgIH1cblxuICAgIGNyZWF0ZUNhbWVyYSAoKSB7XG4gICAgICAgIHRoaXMuY2FtZXJhID0gbmV3IENhbWVyYSh0aGlzLmdsKVxuICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi56ID0gNVxuICAgIH1cblxuICAgIGNyZWF0ZVNjZW5lICgpIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IG5ldyBUcmFuc2Zvcm0oKVxuICAgIH1cblxuICAgIC8vICAgICAgSG9tZVxuXG4gICAgY3JlYXRlSG9tZSAoKSB7XG4gICAgICAgIHRoaXMuaG9tZSA9IG5ldyBIb21lKHtcbiAgICAgICAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICAgICAgICBzaXplczogdGhpcy5zaXplc1xuICAgICAgICB9KVxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY3JlYXRlIGhvbWUhJylcbiAgICB9XG5cbiAgICBkZXN0cm95SG9tZSAoKSB7XG4gICAgICAgIGlmICghdGhpcy5ob21lKSByZXR1cm5cblxuICAgICAgICB0aGlzLmhvbWUuZGVzdHJveSgpXG4gICAgICAgIHRoaXMuaG9tZSA9IG51bGxcbiAgICAgICAgY29uc29sZS5sb2coJ2Rlc3Ryb3kgaG9tZSEnKVxuICAgIH1cblxuICAgIC8vICAgICAgICAgIEFib3V0XG5cbiAgICBjcmVhdGVBYm91dCAoKSB7XG4gICAgICAgIHRoaXMuYWJvdXQgPSBuZXcgQWJvdXQoe1xuICAgICAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgICAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgICAgIH0pXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjcmVhdGUgQWJvdXQhJylcbiAgICB9XG5cbiAgICBkZXN0cm95QWJvdXQgKCkge1xuICAgICAgICBpZiAoIXRoaXMuYWJvdXQpIHJldHVyblxuXG4gICAgICAgIHRoaXMuYWJvdXQuZGVzdHJveSgpXG4gICAgICAgIHRoaXMuYWJvdXQgPSBudWxsXG4gICAgICAgIGNvbnNvbGUubG9nKCdkZXN0cm95IGFib3V0IScpXG4gICAgfVxuXG4gICAgLy8gICAgICAgICAgICAgIENvbGxlY3Rpb25zXG5cbiAgICBjcmVhdGVDb2xsZWN0aW9ucyAoKSB7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbnMoe1xuICAgICAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgICAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZGVzdHJveUNvbGxlY3Rpb25zICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25zKSByZXR1cm5cblxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25zLmRlc3Ryb3koKVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25zID0gbnVsbFxuICAgIH1cblxuICAgIC8vIERldGFpbFxuICAgIGNyZWF0ZURldGFpbCAoKSB7XG4gICAgICAgIHRoaXMuZGV0YWlsID0gbmV3IERldGFpbCh7XG4gICAgICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXMsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiB0aGlzLnRyYW5zaXRpb25cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBkZXN0cm95RGV0YWlsICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRldGFpbCkgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5kZXRhaWwuZGVzdHJveSgpXG4gICAgICAgIHRoaXMuZGV0YWlsID0gbnVsbFxuICAgIH1cblxuICAgIC8vICAgICAgICAgIEV2ZW50c1xuXG4gICAgb25QcmVsb2FkZWQgKCkge1xuICAgICAgICB0aGlzLm9uUGFnZUNoYW5nZUVuZCh0aGlzLnRlbXBsYXRlKVxuICAgIH1cblxuICAgIG9uUGFnZUNoYW5nZVN0YXJ0ICh0ZW1wbGF0ZSwgdXJsKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25zLmhpZGUoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuYWJvdXQuaGlkZSgpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWUuaGlkZSgpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZXRhaWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsLmhpZGUoKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5mcm9tQ29sbGVjdGlvbnNUb0RldGFpbCA9IHRoaXMudGVtcGxhdGUgPT09ICdjb2xsZWN0aW9ucycgJiYgdXJsLmluZGV4T2YoJ2RldGFpbCcpID4gLTFcbiAgICAgICAgdGhpcy5mcm9tRGV0YWlsVG9Db2xsZWN0aW9ucyA9IHRoaXMudGVtcGxhdGUgPT09ICdkZXRhaWwnICYmIHVybC5pbmRleE9mKCdjb2xsZWN0aW9ucycpID4gLTFcblxuICAgICAgICBpZiAodGhpcy5mcm9tQ29sbGVjdGlvbnNUb0RldGFpbCB8fCB0aGlzLmZyb21EZXRhaWxUb0NvbGxlY3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSBuZXcgVHJhbnNpdGlvbih7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbnM6IHRoaXMuY29sbGVjdGlvbnMsXG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgICAgICAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgICAgICAgICAgIHNpemVzOiB0aGlzLnNpemVzXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24uc2V0RWxlbWVudCh0aGlzLmNvbGxlY3Rpb25zIHx8IHRoaXMuZGV0YWlsKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25QYWdlQ2hhbmdlRW5kICh0ZW1wbGF0ZSkge1xuICAgICAgICAvLyBpZiAodGhpcy50cmFuc2l0aW9uKSB7XG4gICAgICAgIC8vICAgICB0aGlzLnRyYW5zaXRpb24uYW5pbWF0ZSh0aGlzLmNvbGxlY3Rpb25zKVxuICAgICAgICAvLyB9XG5cbiAgICAgICAgaWYgKHRlbXBsYXRlID09PSAnY29sbGVjdGlvbnMnKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNvbGxlY3Rpb25zKClcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lDb2xsZWN0aW9ucygpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGVtcGxhdGUgPT09ICdEZXRhaWwnKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURldGFpbCgpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kZXRhaWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveURldGFpbCgpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGVtcGxhdGUgPT09ICdhYm91dCcpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQWJvdXQoKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUFib3V0KClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ2hvbWUnKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUhvbWUoKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95SG9tZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblJlc2l6ZSAoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KVxuXG4gICAgICAgIHRoaXMuY2FtZXJhLnBlcnNwZWN0aXZlKHtcbiAgICAgICAgICAgIGFzcGVjdDogd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBmb3YgPSB0aGlzLmNhbWVyYS5mb3YgKiAoTWF0aC5QSSAvIDE4MClcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gMiAqIE1hdGgudGFuKGZvdiAvIDIpICogdGhpcy5jYW1lcmEucG9zaXRpb24uelxuICAgICAgICBjb25zdCB3aWR0aCA9IGhlaWdodCAqIHRoaXMuY2FtZXJhLmFzcGVjdFxuXG4gICAgICAgIC8vIGNvbnN0IGZvdiA9IHRoaXMuY2FtZXJhLmZvdiAqIChNYXRoLlBJIC8gMTAwKVxuICAgICAgICAvLyBjb25zdCBoZWlnaHQgPSAyICogTWF0aC50YW4oZm92IC8gMikgKiB0aGlzLmNhbWVyYS5wb3NpdGlvbi56XG4gICAgICAgIC8vIGNvbnN0IHdpZHRoID0gaGVpZ2h0ICogdGhpcy5jYW1lcmEuYXNwZWN0XG5cbiAgICAgICAgdGhpcy5zaXplcyA9IHtcbiAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWx1ZXMgPSB7XG4gICAgICAgICAgICBzaXplczogdGhpcy5zaXplc1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbnMub25SZXNpemUodmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICAgICAgICB0aGlzLmRldGFpbC5vblJlc2l6ZSh2YWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5hYm91dCkge1xuICAgICAgICAgICAgdGhpcy5hYm91dC5vblJlc2l6ZSh2YWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWUub25SZXNpemUodmFsdWVzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Ub3VjaERvd24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuaXNEb3duID0gdHJ1ZVxuXG4gICAgICAgIHRoaXMueC5zdGFydCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgICAgIHRoaXMueS5zdGFydCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZXG5cbiAgICAgICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9ucyAmJiB0aGlzLmNvbGxlY3Rpb25zLm9uVG91Y2hEb3duKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25zLm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRldGFpbCAmJiB0aGlzLmRldGFpbC5vblRvdWNoRG93bikge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwub25Ub3VjaERvd24odmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYWJvdXQgJiYgdGhpcy5hYm91dC5vblRvdWNoRG93bikge1xuICAgICAgICAgICAgdGhpcy5hYm91dC5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ob21lICYmIHRoaXMuaG9tZS5vblRvdWNoRG93bikge1xuICAgICAgICAgICAgdGhpcy5ob21lLm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uVG91Y2hNb3ZlIChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNEb3duKSByZXR1cm5cblxuICAgICAgICBjb25zdCB4ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCA6IGV2ZW50LmNsaWVudFhcbiAgICAgICAgY29uc3QgeSA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFkgOiBldmVudC5jbGllbnRZXG5cbiAgICAgICAgdGhpcy54LmVuZCA9IHhcbiAgICAgICAgdGhpcy55LmVuZCA9IHlcblxuICAgICAgICAvLyB0aGlzLnguZGlzdGFuY2UgPSB0aGlzLnguc3RhcnQgLSB0aGlzLnguZW5kXG4gICAgICAgIC8vIHRoaXMueS5kaXN0YW5jZSA9IHRoaXMueS5zdGFydCAtIHRoaXMueS5lbmRcblxuICAgICAgICBjb25zdCB2YWx1ZXMgPSB7XG4gICAgICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgICAgICB5OiB0aGlzLnlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zICYmIHRoaXMuY29sbGVjdGlvbnMub25Ub3VjaE1vdmUpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbnMub25Ub3VjaE1vdmUodmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGV0YWlsICYmIHRoaXMuZGV0YWlsLm9uVG91Y2hNb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLmRldGFpbC5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5hYm91dCAmJiB0aGlzLmFib3V0Lm9uVG91Y2hNb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLmFib3V0Lm9uVG91Y2hNb3ZlKHZhbHVlcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhvbWUgJiYgdGhpcy5ob21lLm9uVG91Y2hNb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWUub25Ub3VjaE1vdmUodmFsdWVzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Ub3VjaFVwIChldmVudCkge1xuICAgICAgICB0aGlzLmlzRG93biA9IGZhbHNlXG5cbiAgICAgICAgY29uc3QgeCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgICAgIGNvbnN0IHkgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQuY2xpZW50WVxuXG4gICAgICAgIHRoaXMueC5lbmQgPSB4XG4gICAgICAgIHRoaXMueS5lbmQgPSB5XG5cbiAgICAgICAgLy8gdGhpcy54LmRpc3RhbmNlID0gdGhpcy54LnN0YXJ0IC0gdGhpcy54LmVuZFxuICAgICAgICAvLyB0aGlzLnkuZGlzdGFuY2UgPSB0aGlzLnkuc3RhcnQgLSB0aGlzLnkuZW5kXG5cbiAgICAgICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9ucyAmJiB0aGlzLmNvbGxlY3Rpb25zLm9uVG91Y2hVcCkge1xuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoVXAodmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGV0YWlsICYmIHRoaXMuZGV0YWlsLm9uVG91Y2hVcCkge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwub25Ub3VjaFVwKHZhbHVlcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmFib3V0ICYmIHRoaXMuYWJvdXQub25Ub3VjaFVwKSB7XG4gICAgICAgICAgICB0aGlzLmFib3V0Lm9uVG91Y2hVcCh2YWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ob21lICYmIHRoaXMuaG9tZS5vblRvdWNoVXApIHtcbiAgICAgICAgICAgIHRoaXMuaG9tZS5vblRvdWNoVXAodmFsdWVzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25XaGVlbCAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbnMub25XaGVlbChldmVudClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhvbWUpIHtcbiAgICAgICAgICAgIHRoaXMuaG9tZS5vbldoZWVsKGV2ZW50KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlIChzY3JvbGwpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbnMudXBkYXRlKHNjcm9sbClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRldGFpbCkge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwudXBkYXRlKHNjcm9sbClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICAgICAgICB0aGlzLmFib3V0LnVwZGF0ZShzY3JvbGwpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWUudXBkYXRlKClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHtcbiAgICAgICAgICAgIGNhbWVyYTogdGhpcy5jYW1lcmEsXG4gICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZVxuICAgICAgICB9KVxuICAgIH1cbn1cbiIsImltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5pbXBvcnQgeyBNZXNoLCBQbGFuZSwgUHJvZ3JhbSB9IGZyb20gJ29nbCdcblxuaW1wb3J0IHZlcnRleCBmcm9tICcuLi8uLi9zaGFkZXJzL3BsYW5lLXZlcnRleC5nbHNsJ1xuaW1wb3J0IGZyYWdtZW50IGZyb20gJy4uLy4uL3NoYWRlcnMvcGxhbmUtZnJhZ21lbnQuZ2xzbCdcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IgKHsgY29sbGVjdGlvbnMsIGdsLCBzY2VuZSwgc2l6ZXMsIHVybCB9KSB7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbnMgPSBjb2xsZWN0aW9uc1xuICAgICAgICB0aGlzLmdsID0gZ2xcbiAgICAgICAgdGhpcy51cmwgPSB1cmxcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xuXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgUGxhbmUodGhpcy5nbClcbiAgICAgICAgLy8gY29uc29sZS5sb2coJyYmIEdlbyAqKicsIHRoaXMuZ2VvbWV0cnkpXG5cbiAgICAgICAgdGhpcy5leHRyYSA9IHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAwXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVQcm9ncmFtICh0ZXh0dXJlKSB7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IG5ldyBQcm9ncmFtKHRoaXMuZ2wsIHtcbiAgICAgICAgICAgIGZyYWdtZW50LFxuICAgICAgICAgICAgdmVydGV4LFxuICAgICAgICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgICAgICAgICB1QWxwaGE6IHsgdmFsdWU6IDEgfSxcbiAgICAgICAgICAgICAgICB0TWFwOiB7IHZhbHVlOiB0ZXh0dXJlIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjcmVhdGVNZXNoIChtZXNoKSB7XG4gICAgICAgIHRoaXMubWVzaCA9IG5ldyBNZXNoKHRoaXMuZ2wsIHtcbiAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxuICAgICAgICAgICAgcHJvZ3JhbTogdGhpcy5wcm9ncmFtXG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnggPSBtZXNoLnNjYWxlLnhcbiAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnkgPSBtZXNoLnNjYWxlLnlcbiAgICAgICAgdGhpcy5tZXNoLnNjYWxlLnogPSBtZXNoLnNjYWxlLnpcblxuICAgICAgICB0aGlzLm1lc2gucG9zaXRpb24ueCA9IG1lc2gucG9zaXRpb24ueFxuICAgICAgICB0aGlzLm1lc2gucG9zaXRpb24ueSA9IG1lc2gucG9zaXRpb24ueVxuICAgICAgICB0aGlzLm1lc2gucG9zaXRpb24ueiA9IG1lc2gucG9zaXRpb24ueiAqIDAuMDFcblxuICAgICAgICB0aGlzLm1lc2guc2V0UGFyZW50KHRoaXMuc2NlbmUpXG4gICAgfVxuXG4gICAgc2V0RWxlbWVudCAoZWxlbWVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygnZWxlbWVudCoqKicsIGVsZW1lbnQpXG4gICAgICAgIGlmIChlbGVtZW50LmlkID09PSAnY29sbGVjdGlvbnMnKSB7XG4gICAgICAgICAgICBjb25zdCB7IGluZGV4LCBtZWRpYXMgfSA9IGVsZW1lbnRcbiAgICAgICAgICAgIGNvbnN0IG1lZGlhID0gbWVkaWFzW2luZGV4XVxuXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVByb2dyYW0obWVkaWEudGV4dHVyZSlcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTWVzaChtZWRpYS5tZXNoKVxuXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSAnZGV0YWlsJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVQcm9ncmFtKGVsZW1lbnQudGV4dHVyZSlcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTWVzaChlbGVtZW50KVxuXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSAnY29sbGVjdGlvbnMnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAgICAgICAgICBBbmltYXRpb25cbiAgICBhbmltYXRlIChtZXNoLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCB0aW1lbGluZSA9IEdTQVAudGltZWxpbmUoe1xuICAgICAgICAgICAgb25Db21wbGV0ZVxuICAgICAgICB9KVxuXG4gICAgICAgIHRpbWVsaW5lLnRvKHRoaXMubWVzaC5zY2FsZSwge1xuICAgICAgICAgICAgZHVyYXRpb246IDEuNSxcbiAgICAgICAgICAgIGVhc2U6ICdleHBvLmluT3V0JyxcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgIH1cbn1cbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjY1ZGY3NTg5MzlkNWFlMWFhZWMwXCIpIl0sIm5hbWVzIjpbImNzc1JlbG9hZCIsIm1vZHVsZSIsImlkIiwiaG90IiwiZGlzcG9zZSIsImFjY2VwdCIsInVuZGVmaW5lZCIsIkNhbnZhcyIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGUiLCJ0aGlzIiwiY3JlYXRlUmVuZGVyZXIiLCJjcmVhdGVDYW1lcmEiLCJjcmVhdGVTY2VuZSIsIm9uUmVzaXplIiwieCIsInN0YXJ0IiwiZGlzdGFuY2UiLCJlbmQiLCJ5IiwicmVuZGVyZXIiLCJSZW5kZXJlciIsImFscGhhIiwiYW50aUFsaWFzaW5nIiwiZ2wiLCJkb2N1bWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNhbnZhcyIsImNhbWVyYSIsIkNhbWVyYSIsInBvc2l0aW9uIiwieiIsInNjZW5lIiwiVHJhbnNmb3JtIiwiY3JlYXRlSG9tZSIsImhvbWUiLCJIb21lIiwic2l6ZXMiLCJkZXN0cm95SG9tZSIsImRlc3Ryb3kiLCJjb25zb2xlIiwibG9nIiwiY3JlYXRlQWJvdXQiLCJhYm91dCIsIkFib3V0IiwiZGVzdHJveUFib3V0IiwiY3JlYXRlQ29sbGVjdGlvbnMiLCJjb2xsZWN0aW9ucyIsIkNvbGxlY3Rpb25zIiwiZGVzdHJveUNvbGxlY3Rpb25zIiwiY3JlYXRlRGV0YWlsIiwiZGV0YWlsIiwiRGV0YWlsIiwidHJhbnNpdGlvbiIsImRlc3Ryb3lEZXRhaWwiLCJvblByZWxvYWRlZCIsIm9uUGFnZUNoYW5nZUVuZCIsIm9uUGFnZUNoYW5nZVN0YXJ0IiwidXJsIiwiaGlkZSIsImZyb21Db2xsZWN0aW9uc1RvRGV0YWlsIiwiaW5kZXhPZiIsImZyb21EZXRhaWxUb0NvbGxlY3Rpb25zIiwiVHJhbnNpdGlvbiIsInNldEVsZW1lbnQiLCJzZXRTaXplIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwicGVyc3BlY3RpdmUiLCJhc3BlY3QiLCJmb3YiLCJNYXRoIiwiUEkiLCJoZWlnaHQiLCJ0YW4iLCJ3aWR0aCIsInZhbHVlcyIsIm9uVG91Y2hEb3duIiwiZXZlbnQiLCJpc0Rvd24iLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJ1cGRhdGUiLCJzY3JvbGwiLCJyZW5kZXIiLCJnZW9tZXRyeSIsIlBsYW5lIiwiZXh0cmEiLCJjcmVhdGVQcm9ncmFtIiwidGV4dHVyZSIsInByb2dyYW0iLCJQcm9ncmFtIiwiZnJhZ21lbnQiLCJ2ZXJ0ZXgiLCJ1bmlmb3JtcyIsInVBbHBoYSIsInZhbHVlIiwidE1hcCIsImNyZWF0ZU1lc2giLCJtZXNoIiwiTWVzaCIsInNjYWxlIiwic2V0UGFyZW50IiwiZWxlbWVudCIsImluZGV4IiwibWVkaWFzIiwibWVkaWEiLCJhbmltYXRlIiwiY2FsbGJhY2siLCJHU0FQIiwidGltZWxpbmUiLCJvbkNvbXBsZXRlIiwidG8iLCJkdXJhdGlvbiIsImVhc2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=