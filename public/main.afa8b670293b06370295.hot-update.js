/*! For license information please see main.afa8b670293b06370295.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateprada("main",{"./styles/index.scss":(e,t,s)=>{s.r(t);var i=s("./node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js")(e.id,{publicPath:"",locals:!1});e.hot.dispose(i),e.hot.accept(void 0,i)},"./app/components/Canvas/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s("./node_modules/ogl/src/core/Renderer.js"),o=s("./node_modules/ogl/src/core/Camera.js"),h=s("./node_modules/ogl/src/core/Transform.js"),n=s("./app/components/Canvas/Home/index.js"),l=s("./app/components/Canvas/About/index.js"),a=s("./app/components/Canvas/Collections/index.js"),c=s("./app/components/Canvas/transition.js"),r=s("./app/components/Canvas/Detail/index.js");class d{constructor({template:e}){this.template=e,this.createRenderer(),this.createCamera(),this.createScene(),this.onResize(),this.x={start:0,distance:0,end:0},this.y={start:0,distance:0,end:0}}createRenderer(){this.renderer=new i.Renderer({alpha:!0,antiAliasing:!0}),this.gl=this.renderer.gl,document.body.appendChild(this.gl.canvas)}createCamera(){this.camera=new o.Camera(this.gl),this.camera.position.z=5}createScene(){this.scene=new h.Transform}createHome(){this.home=new n.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyHome(){this.home&&(this.home.destroy(),this.home=null,console.log("destroy home!"))}createAbout(){this.about=new l.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyAbout(){this.about&&(this.about.destroy(),this.about=null,console.log("destroy about!"))}createCollections(){this.collections=new a.default({gl:this.gl,scene:this.scene,sizes:this.sizes})}destroyCollections(){this.collections&&(this.collections.destroy(),this.collections=null)}createDetail(){this.detail=new r.default({gl:this.gl,scene:this.scene,sizes:this.sizes,transition:this.transition})}destroyDetail(){this.detail&&(this.detail.destroy(),this.detail=null)}onPreloaded(){this.onPageChangeEnd(this.template)}onPageChangeStart(e,t){this.collections&&this.collections.hide(),this.about&&this.about.hide(),this.home&&this.home.hide(),this.detail&&this.detail.hide(),this.fromCollectionsToDetail="collections"===this.template&&t.indexOf("detail")>-1,this.fromDetailToCollections="detail"===this.template&&t.indexOf("collections")>-1,(this.fromCollectionsToDetail||this.fromDetailToCollections)&&(this.transition=new c.default({collections:this.collections,url:t,gl:this.gl,scene:this.scene,sizes:this.sizes}),this.transition.setElement(this.collections||this.detail))}onPageChangeEnd(e){"collections"===e?this.createCollections():this.collections&&this.destroyCollections(),"Detail"===e?this.createDetail():this.detail&&this.destroyDetail(),"about"===e?this.createAbout():this.about&&this.destroyAbout(),"home"===e?this.createHome():this.home&&this.destroyHome()}onResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.perspective({aspect:window.innerWidth/window.innerHeight});const e=this.camera.fov*(Math.PI/180),t=2*Math.tan(e/2)*this.camera.position.z,s=t*this.camera.aspect;this.sizes={height:t,width:s};const i={sizes:this.sizes};this.collections&&this.collections.onResize(i),this.detail&&this.detail.onResize(i),this.about&&this.about.onResize(i),this.home&&this.home.onResize(i)}onTouchDown(e){this.isDown=!0,this.x.start=e.touches?e.touches[0].clientX:e.clientX,this.y.start=e.touches?e.touches[0].clientY:e.clientY;const t={x:this.x,y:this.y};this.collections&&this.collections.onTouchDown&&this.collections.onTouchDown(t),this.detail&&this.detail.onTouchDown&&this.detail.onTouchDown(t),this.about&&this.about.onTouchDown&&this.about.onTouchDown(t),this.home&&this.home.onTouchDown&&this.home.onTouchDown(t)}onTouchMove(e){if(!this.isDown)return;const t=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.collections&&this.collections.onTouchMove&&this.collections.onTouchMove(i),this.detail&&this.detail.onTouchMove&&this.detail.onTouchMove(i),this.about&&this.about.onTouchMove&&this.about.onTouchMove(i),this.home&&this.home.onTouchMove&&this.home.onTouchMove(i)}onTouchUp(e){this.isDown=!1;const t=e.touches?e.touches[0].clientX:e.clientX,s=e.touches?e.touches[0].clientY:e.clientY;this.x.end=t,this.y.end=s;const i={x:this.x,y:this.y};this.collections&&this.collections.onTouchUp&&this.collections.onTouchUp(i),this.detail&&this.detail.onTouchUp&&this.detail.onTouchUp(i),this.about&&this.about.onTouchUp&&this.about.onTouchUp(i),this.home&&this.home.onTouchUp&&this.home.onTouchUp(i)}onWheel(e){this.collections&&this.collections.onWheel(e),this.home&&this.home.onWheel(e)}update(e){this.collections&&this.collections.update(e),this.detail&&this.detail.update(e),this.about&&this.about.update(e),this.home&&this.home.update(),this.renderer.render({camera:this.camera,scene:this.scene})}}},"./app/components/Canvas/transition.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var i=s("./node_modules/gsap/index.js"),o=s("./node_modules/ogl/src/extras/Plane.js"),h=s("./node_modules/ogl/src/core/Program.js"),n=s("./node_modules/ogl/src/core/Mesh.js"),l=s("./app/shaders/plane-vertex.glsl"),a=s("./app/shaders/plane-fragment.glsl");const c=class{constructor({collections:e,gl:t,scene:s,sizes:i,url:h}){this.collections=e,this.gl=t,this.url=h,this.scene=s,this.sizes=i,this.geometry=new o.Plane(this.gl),this.extra={x:0,y:0}}createProgram(e){this.program=new h.Program(this.gl,{fragment:a.default,vertex:l.default,uniforms:{uAlpha:{value:1},tMap:{value:e}}})}createMesh(e){this.mesh=new n.Mesh(this.gl,{geometry:this.geometry,program:this.program}),this.mesh.scale.x=e.scale.x,this.mesh.scale.y=e.scale.y,this.mesh.scale.z=e.scale.z,this.mesh.position.x=e.position.x,this.mesh.position.y=e.position.y,this.mesh.position.z=.01*e.position.z,this.mesh.setParent(this.scene)}setElement(e){if(console.log("element***",e),"collections"===e.id){const{index:t,medias:s}=e,i=s[t];this.createProgram(i.texture),this.createMesh(i.mesh),this.transition="detail"}else this.createProgram(e.texture),this.createMesh(e),this.transition="collections"}animate(e,t){const s=i.default.timeline({onComplete});s.to(this.mesh.scale,{duration:1.5,ease:"expo.inOut",x:e.scale.x,y:e.scale.y,z:e.scale.z},0),s.to(this.mesh.position,{duration:1.5,ease:"expo.inOut",x:e.position.x,y:e.position.y,z:e.position.z},0),s.call((e=>{this.scene.removeChild(this.mesh)}))}}}},(function(e){e.h=()=>"7fbb774a50943a3b2446"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L3ByYWRhLy4vc3R5bGVzL2luZGV4LnNjc3M/ZjBmZiIsIndlYnBhY2s6Ly9wcmFkYS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFkYS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy90cmFuc2l0aW9uLmpzIiwid2VicGFjazovL3ByYWRhL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTtcbiAgICBpZihtb2R1bGUuaG90KSB7XG4gICAgICAvLyAxNzIzNzE4OTI3NDMxXG4gICAgICB2YXIgY3NzUmVsb2FkID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2htci9ob3RNb2R1bGVSZXBsYWNlbWVudC5qc1wiKShtb2R1bGUuaWQsIHtcInB1YmxpY1BhdGhcIjpcIlwiLFwibG9jYWxzXCI6ZmFsc2V9KTtcbiAgICAgIG1vZHVsZS5ob3QuZGlzcG9zZShjc3NSZWxvYWQpO1xuICAgICAgbW9kdWxlLmhvdC5hY2NlcHQodW5kZWZpbmVkLCBjc3NSZWxvYWQpO1xuICAgIH1cbiAgIiwiaW1wb3J0IHsgQ2FtZXJhLCBSZW5kZXJlciwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IEhvbWUgZnJvbSAnLi9Ib21lL2luZGV4LmpzJ1xuaW1wb3J0IEFib3V0IGZyb20gJy4vQWJvdXQvaW5kZXguanMnXG5pbXBvcnQgQ29sbGVjdGlvbnMgZnJvbSAnLi9Db2xsZWN0aW9ucy9pbmRleC5qcydcbmltcG9ydCBUcmFuc2l0aW9uIGZyb20gJy4vdHJhbnNpdGlvbi5qcydcbmltcG9ydCBEZXRhaWwgZnJvbSAnLi9EZXRhaWwvaW5kZXguanMnXG5cbi8vIGltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhcyB7XG4gICAgY29uc3RydWN0b3IgKHsgdGVtcGxhdGUgfSkge1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGVcblxuICAgICAgICB0aGlzLmNyZWF0ZVJlbmRlcmVyKClcbiAgICAgICAgdGhpcy5jcmVhdGVDYW1lcmEoKVxuICAgICAgICB0aGlzLmNyZWF0ZVNjZW5lKClcblxuICAgICAgICB0aGlzLm9uUmVzaXplKClcblxuICAgICAgICAvLyB0aGlzLm9uUGFnZUNoYW5nZUVuZCh0aGlzLnRlbXBsYXRlKVxuICAgICAgICAvLyB0aGlzLmNyZWF0ZUhvbWUoKVxuXG4gICAgICAgIHRoaXMueCA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICAgICAgICBlbmQ6IDBcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMueSA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICAgICAgICBlbmQ6IDBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNyZWF0ZVJlbmRlcmVyICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcih7XG4gICAgICAgICAgICBhbHBoYTogdHJ1ZSxcbiAgICAgICAgICAgIGFudGlBbGlhc2luZzogdHJ1ZVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuZ2wgPSB0aGlzLnJlbmRlcmVyLmdsXG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmdsLmNhbnZhcylcbiAgICB9XG5cbiAgICBjcmVhdGVDYW1lcmEgKCkge1xuICAgICAgICB0aGlzLmNhbWVyYSA9IG5ldyBDYW1lcmEodGhpcy5nbClcbiAgICAgICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9IDVcbiAgICB9XG5cbiAgICBjcmVhdGVTY2VuZSAoKSB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBuZXcgVHJhbnNmb3JtKClcbiAgICB9XG5cbiAgICAvLyAgICAgIEhvbWVcblxuICAgIGNyZWF0ZUhvbWUgKCkge1xuICAgICAgICB0aGlzLmhvbWUgPSBuZXcgSG9tZSh7XG4gICAgICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgICAgIHNjZW5lOiB0aGlzLnNjZW5lLFxuICAgICAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICAgICAgfSlcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NyZWF0ZSBob21lIScpXG4gICAgfVxuXG4gICAgZGVzdHJveUhvbWUgKCkge1xuICAgICAgICBpZiAoIXRoaXMuaG9tZSkgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5ob21lLmRlc3Ryb3koKVxuICAgICAgICB0aGlzLmhvbWUgPSBudWxsXG4gICAgICAgIGNvbnNvbGUubG9nKCdkZXN0cm95IGhvbWUhJylcbiAgICB9XG5cbiAgICAvLyAgICAgICAgICBBYm91dFxuXG4gICAgY3JlYXRlQWJvdXQgKCkge1xuICAgICAgICB0aGlzLmFib3V0ID0gbmV3IEFib3V0KHtcbiAgICAgICAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICAgICAgICBzaXplczogdGhpcy5zaXplc1xuICAgICAgICB9KVxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY3JlYXRlIEFib3V0IScpXG4gICAgfVxuXG4gICAgZGVzdHJveUFib3V0ICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFib3V0KSByZXR1cm5cblxuICAgICAgICB0aGlzLmFib3V0LmRlc3Ryb3koKVxuICAgICAgICB0aGlzLmFib3V0ID0gbnVsbFxuICAgICAgICBjb25zb2xlLmxvZygnZGVzdHJveSBhYm91dCEnKVxuICAgIH1cblxuICAgIC8vICAgICAgICAgICAgICBDb2xsZWN0aW9uc1xuXG4gICAgY3JlYXRlQ29sbGVjdGlvbnMgKCkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25zID0gbmV3IENvbGxlY3Rpb25zKHtcbiAgICAgICAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsXG4gICAgICAgICAgICBzaXplczogdGhpcy5zaXplc1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGRlc3Ryb3lDb2xsZWN0aW9ucyAoKSB7XG4gICAgICAgIGlmICghdGhpcy5jb2xsZWN0aW9ucykgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5jb2xsZWN0aW9ucy5kZXN0cm95KClcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9ucyA9IG51bGxcbiAgICB9XG5cbiAgICAvLyBEZXRhaWxcbiAgICBjcmVhdGVEZXRhaWwgKCkge1xuICAgICAgICB0aGlzLmRldGFpbCA9IG5ldyBEZXRhaWwoe1xuICAgICAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgICAgICAgIHNpemVzOiB0aGlzLnNpemVzLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogdGhpcy50cmFuc2l0aW9uXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZGVzdHJveURldGFpbCAoKSB7XG4gICAgICAgIGlmICghdGhpcy5kZXRhaWwpIHJldHVyblxuXG4gICAgICAgIHRoaXMuZGV0YWlsLmRlc3Ryb3koKVxuICAgICAgICB0aGlzLmRldGFpbCA9IG51bGxcbiAgICB9XG5cbiAgICAvLyAgICAgICAgICBFdmVudHNcblxuICAgIG9uUHJlbG9hZGVkICgpIHtcbiAgICAgICAgdGhpcy5vblBhZ2VDaGFuZ2VFbmQodGhpcy50ZW1wbGF0ZSlcbiAgICB9XG5cbiAgICBvblBhZ2VDaGFuZ2VTdGFydCAodGVtcGxhdGUsIHVybCkge1xuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9ucy5oaWRlKClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICAgICAgICB0aGlzLmFib3V0LmhpZGUoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgICAgICAgdGhpcy5ob21lLmhpZGUoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICAgICAgICB0aGlzLmRldGFpbC5oaWRlKClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZnJvbUNvbGxlY3Rpb25zVG9EZXRhaWwgPSB0aGlzLnRlbXBsYXRlID09PSAnY29sbGVjdGlvbnMnICYmIHVybC5pbmRleE9mKCdkZXRhaWwnKSA+IC0xXG4gICAgICAgIHRoaXMuZnJvbURldGFpbFRvQ29sbGVjdGlvbnMgPSB0aGlzLnRlbXBsYXRlID09PSAnZGV0YWlsJyAmJiB1cmwuaW5kZXhPZignY29sbGVjdGlvbnMnKSA+IC0xXG5cbiAgICAgICAgaWYgKHRoaXMuZnJvbUNvbGxlY3Rpb25zVG9EZXRhaWwgfHwgdGhpcy5mcm9tRGV0YWlsVG9Db2xsZWN0aW9ucykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gbmV3IFRyYW5zaXRpb24oe1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zOiB0aGlzLmNvbGxlY3Rpb25zLFxuICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSxcbiAgICAgICAgICAgICAgICBzaXplczogdGhpcy5zaXplc1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uLnNldEVsZW1lbnQodGhpcy5jb2xsZWN0aW9ucyB8fCB0aGlzLmRldGFpbClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUGFnZUNoYW5nZUVuZCAodGVtcGxhdGUpIHtcbiAgICAgICAgLy8gaWYgKHRoaXMudHJhbnNpdGlvbikge1xuICAgICAgICAvLyAgICAgdGhpcy50cmFuc2l0aW9uLmFuaW1hdGUodGhpcy5jb2xsZWN0aW9ucylcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGlmICh0ZW1wbGF0ZSA9PT0gJ2NvbGxlY3Rpb25zJykge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb2xsZWN0aW9ucygpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb2xsZWN0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95Q29sbGVjdGlvbnMoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRlbXBsYXRlID09PSAnRGV0YWlsJykge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVEZXRhaWwoKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGV0YWlsKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lEZXRhaWwoKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRlbXBsYXRlID09PSAnYWJvdXQnKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUFib3V0KClcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFib3V0KSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lBYm91dCgpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGVtcGxhdGUgPT09ICdob21lJykge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVIb21lKClcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhvbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveUhvbWUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25SZXNpemUgKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodClcblxuICAgICAgICB0aGlzLmNhbWVyYS5wZXJzcGVjdGl2ZSh7XG4gICAgICAgICAgICBhc3BlY3Q6IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgZm92ID0gdGhpcy5jYW1lcmEuZm92ICogKE1hdGguUEkgLyAxODApXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IDIgKiBNYXRoLnRhbihmb3YgLyAyKSAqIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnpcbiAgICAgICAgY29uc3Qgd2lkdGggPSBoZWlnaHQgKiB0aGlzLmNhbWVyYS5hc3BlY3RcblxuICAgICAgICAvLyBjb25zdCBmb3YgPSB0aGlzLmNhbWVyYS5mb3YgKiAoTWF0aC5QSSAvIDEwMClcbiAgICAgICAgLy8gY29uc3QgaGVpZ2h0ID0gMiAqIE1hdGgudGFuKGZvdiAvIDIpICogdGhpcy5jYW1lcmEucG9zaXRpb24uelxuICAgICAgICAvLyBjb25zdCB3aWR0aCA9IGhlaWdodCAqIHRoaXMuY2FtZXJhLmFzcGVjdFxuXG4gICAgICAgIHRoaXMuc2l6ZXMgPSB7XG4gICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICB3aWR0aFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgICAgICAgc2l6ZXM6IHRoaXMuc2l6ZXNcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25zLm9uUmVzaXplKHZhbHVlcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRldGFpbCkge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwub25SZXNpemUodmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYWJvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuYWJvdXQub25SZXNpemUodmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgICAgICAgdGhpcy5ob21lLm9uUmVzaXplKHZhbHVlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uVG91Y2hEb3duIChldmVudCkge1xuICAgICAgICB0aGlzLmlzRG93biA9IHRydWVcblxuICAgICAgICB0aGlzLnguc3RhcnQgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WFxuICAgICAgICB0aGlzLnkuc3RhcnQgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQuY2xpZW50WVxuXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbnMgJiYgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoRG93bikge1xuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZXRhaWwgJiYgdGhpcy5kZXRhaWwub25Ub3VjaERvd24pIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsLm9uVG91Y2hEb3duKHZhbHVlcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmFib3V0ICYmIHRoaXMuYWJvdXQub25Ub3VjaERvd24pIHtcbiAgICAgICAgICAgIHRoaXMuYWJvdXQub25Ub3VjaERvd24odmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaG9tZSAmJiB0aGlzLmhvbWUub25Ub3VjaERvd24pIHtcbiAgICAgICAgICAgIHRoaXMuaG9tZS5vblRvdWNoRG93bih2YWx1ZXMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblRvdWNoTW92ZSAoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzRG93bikgcmV0dXJuXG5cbiAgICAgICAgY29uc3QgeCA9IGV2ZW50LnRvdWNoZXMgPyBldmVudC50b3VjaGVzWzBdLmNsaWVudFggOiBldmVudC5jbGllbnRYXG4gICAgICAgIGNvbnN0IHkgPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRZIDogZXZlbnQuY2xpZW50WVxuXG4gICAgICAgIHRoaXMueC5lbmQgPSB4XG4gICAgICAgIHRoaXMueS5lbmQgPSB5XG5cbiAgICAgICAgLy8gdGhpcy54LmRpc3RhbmNlID0gdGhpcy54LnN0YXJ0IC0gdGhpcy54LmVuZFxuICAgICAgICAvLyB0aGlzLnkuZGlzdGFuY2UgPSB0aGlzLnkuc3RhcnQgLSB0aGlzLnkuZW5kXG5cbiAgICAgICAgY29uc3QgdmFsdWVzID0ge1xuICAgICAgICAgICAgeDogdGhpcy54LFxuICAgICAgICAgICAgeTogdGhpcy55XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9ucyAmJiB0aGlzLmNvbGxlY3Rpb25zLm9uVG91Y2hNb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25zLm9uVG91Y2hNb3ZlKHZhbHVlcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRldGFpbCAmJiB0aGlzLmRldGFpbC5vblRvdWNoTW92ZSkge1xuICAgICAgICAgICAgdGhpcy5kZXRhaWwub25Ub3VjaE1vdmUodmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYWJvdXQgJiYgdGhpcy5hYm91dC5vblRvdWNoTW92ZSkge1xuICAgICAgICAgICAgdGhpcy5hYm91dC5vblRvdWNoTW92ZSh2YWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ob21lICYmIHRoaXMuaG9tZS5vblRvdWNoTW92ZSkge1xuICAgICAgICAgICAgdGhpcy5ob21lLm9uVG91Y2hNb3ZlKHZhbHVlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uVG91Y2hVcCAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5pc0Rvd24gPSBmYWxzZVxuXG4gICAgICAgIGNvbnN0IHggPSBldmVudC50b3VjaGVzID8gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYIDogZXZlbnQuY2xpZW50WFxuICAgICAgICBjb25zdCB5ID0gZXZlbnQudG91Y2hlcyA/IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSA6IGV2ZW50LmNsaWVudFlcblxuICAgICAgICB0aGlzLnguZW5kID0geFxuICAgICAgICB0aGlzLnkuZW5kID0geVxuXG4gICAgICAgIC8vIHRoaXMueC5kaXN0YW5jZSA9IHRoaXMueC5zdGFydCAtIHRoaXMueC5lbmRcbiAgICAgICAgLy8gdGhpcy55LmRpc3RhbmNlID0gdGhpcy55LnN0YXJ0IC0gdGhpcy55LmVuZFxuXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHtcbiAgICAgICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgICAgIHk6IHRoaXMueVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbnMgJiYgdGhpcy5jb2xsZWN0aW9ucy5vblRvdWNoVXApIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbnMub25Ub3VjaFVwKHZhbHVlcylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRldGFpbCAmJiB0aGlzLmRldGFpbC5vblRvdWNoVXApIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsLm9uVG91Y2hVcCh2YWx1ZXMpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5hYm91dCAmJiB0aGlzLmFib3V0Lm9uVG91Y2hVcCkge1xuICAgICAgICAgICAgdGhpcy5hYm91dC5vblRvdWNoVXAodmFsdWVzKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaG9tZSAmJiB0aGlzLmhvbWUub25Ub3VjaFVwKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWUub25Ub3VjaFVwKHZhbHVlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uV2hlZWwgKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25zLm9uV2hlZWwoZXZlbnQpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ob21lKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWUub25XaGVlbChldmVudClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZSAoc2Nyb2xsKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25zLnVwZGF0ZShzY3JvbGwpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZXRhaWwpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWlsLnVwZGF0ZShzY3JvbGwpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5hYm91dCkge1xuICAgICAgICAgICAgdGhpcy5hYm91dC51cGRhdGUoc2Nyb2xsKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaG9tZSkge1xuICAgICAgICAgICAgdGhpcy5ob21lLnVwZGF0ZSgpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih7XG4gICAgICAgICAgICBjYW1lcmE6IHRoaXMuY2FtZXJhLFxuICAgICAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmVcbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJpbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xuaW1wb3J0IHsgTWVzaCwgUGxhbmUsIFByb2dyYW0gfSBmcm9tICdvZ2wnXG5cbmltcG9ydCB2ZXJ0ZXggZnJvbSAnLi4vLi4vc2hhZGVycy9wbGFuZS12ZXJ0ZXguZ2xzbCdcbmltcG9ydCBmcmFnbWVudCBmcm9tICcuLi8uLi9zaGFkZXJzL3BsYW5lLWZyYWdtZW50Lmdsc2wnXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yICh7IGNvbGxlY3Rpb25zLCBnbCwgc2NlbmUsIHNpemVzLCB1cmwgfSkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25zID0gY29sbGVjdGlvbnNcbiAgICAgICAgdGhpcy5nbCA9IGdsXG4gICAgICAgIHRoaXMudXJsID0gdXJsXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxuICAgICAgICB0aGlzLnNpemVzID0gc2l6ZXNcblxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCcmJiBHZW8gKionLCB0aGlzLmdlb21ldHJ5KVxuXG4gICAgICAgIHRoaXMuZXh0cmEgPSB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlUHJvZ3JhbSAodGV4dHVyZSkge1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBuZXcgUHJvZ3JhbSh0aGlzLmdsLCB7XG4gICAgICAgICAgICBmcmFnbWVudCxcbiAgICAgICAgICAgIHZlcnRleCxcbiAgICAgICAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgICAgICAgICAgdUFscGhhOiB7IHZhbHVlOiAxIH0sXG4gICAgICAgICAgICAgICAgdE1hcDogeyB2YWx1ZTogdGV4dHVyZSB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY3JlYXRlTWVzaCAobWVzaCkge1xuICAgICAgICB0aGlzLm1lc2ggPSBuZXcgTWVzaCh0aGlzLmdsLCB7XG4gICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcbiAgICAgICAgICAgIHByb2dyYW06IHRoaXMucHJvZ3JhbVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMubWVzaC5zY2FsZS54ID0gbWVzaC5zY2FsZS54XG4gICAgICAgIHRoaXMubWVzaC5zY2FsZS55ID0gbWVzaC5zY2FsZS55XG4gICAgICAgIHRoaXMubWVzaC5zY2FsZS56ID0gbWVzaC5zY2FsZS56XG5cbiAgICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLnggPSBtZXNoLnBvc2l0aW9uLnhcbiAgICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLnkgPSBtZXNoLnBvc2l0aW9uLnlcbiAgICAgICAgdGhpcy5tZXNoLnBvc2l0aW9uLnogPSBtZXNoLnBvc2l0aW9uLnogKiAwLjAxXG5cbiAgICAgICAgdGhpcy5tZXNoLnNldFBhcmVudCh0aGlzLnNjZW5lKVxuICAgIH1cblxuICAgIHNldEVsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VsZW1lbnQqKionLCBlbGVtZW50KVxuICAgICAgICBpZiAoZWxlbWVudC5pZCA9PT0gJ2NvbGxlY3Rpb25zJykge1xuICAgICAgICAgICAgY29uc3QgeyBpbmRleCwgbWVkaWFzIH0gPSBlbGVtZW50XG4gICAgICAgICAgICBjb25zdCBtZWRpYSA9IG1lZGlhc1tpbmRleF1cblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVQcm9ncmFtKG1lZGlhLnRleHR1cmUpXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lc2gobWVkaWEubWVzaClcblxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gJ2RldGFpbCdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUHJvZ3JhbShlbGVtZW50LnRleHR1cmUpXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lc2goZWxlbWVudClcblxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gJ2NvbGxlY3Rpb25zJ1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gICAgICAgICAgQW5pbWF0aW9uXG4gICAgYW5pbWF0ZSAobWVzaCwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgdGltZWxpbmUgPSBHU0FQLnRpbWVsaW5lKHtcbiAgICAgICAgICAgIG9uQ29tcGxldGVcbiAgICAgICAgfSlcblxuICAgICAgICB0aW1lbGluZS50byh0aGlzLm1lc2guc2NhbGUsIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxLjUsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICB4OiBtZXNoLnNjYWxlLngsXG4gICAgICAgICAgICB5OiBtZXNoLnNjYWxlLnksXG4gICAgICAgICAgICB6OiBtZXNoLnNjYWxlLnpcbiAgICAgICAgfSwgMClcblxuICAgICAgICB0aW1lbGluZS50byh0aGlzLm1lc2gucG9zaXRpb24sIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxLjUsXG4gICAgICAgICAgICBlYXNlOiAnZXhwby5pbk91dCcsXG4gICAgICAgICAgICB4OiBtZXNoLnBvc2l0aW9uLngsXG4gICAgICAgICAgICB5OiBtZXNoLnBvc2l0aW9uLnksXG4gICAgICAgICAgICB6OiBtZXNoLnBvc2l0aW9uLnpcbiAgICAgICAgfSwgMClcblxuICAgICAgICB0aW1lbGluZS5jYWxsKF8gPT4ge1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLm1lc2gpXG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiN2ZiYjc3NGE1MDk0M2EzYjI0NDZcIikiXSwibmFtZXMiOlsiY3NzUmVsb2FkIiwibW9kdWxlIiwiaWQiLCJob3QiLCJkaXNwb3NlIiwiYWNjZXB0IiwidW5kZWZpbmVkIiwiQ2FudmFzIiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZSIsInRoaXMiLCJjcmVhdGVSZW5kZXJlciIsImNyZWF0ZUNhbWVyYSIsImNyZWF0ZVNjZW5lIiwib25SZXNpemUiLCJ4Iiwic3RhcnQiLCJkaXN0YW5jZSIsImVuZCIsInkiLCJyZW5kZXJlciIsIlJlbmRlcmVyIiwiYWxwaGEiLCJhbnRpQWxpYXNpbmciLCJnbCIsImRvY3VtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2FudmFzIiwiY2FtZXJhIiwiQ2FtZXJhIiwicG9zaXRpb24iLCJ6Iiwic2NlbmUiLCJUcmFuc2Zvcm0iLCJjcmVhdGVIb21lIiwiaG9tZSIsIkhvbWUiLCJzaXplcyIsImRlc3Ryb3lIb21lIiwiZGVzdHJveSIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGVBYm91dCIsImFib3V0IiwiQWJvdXQiLCJkZXN0cm95QWJvdXQiLCJjcmVhdGVDb2xsZWN0aW9ucyIsImNvbGxlY3Rpb25zIiwiQ29sbGVjdGlvbnMiLCJkZXN0cm95Q29sbGVjdGlvbnMiLCJjcmVhdGVEZXRhaWwiLCJkZXRhaWwiLCJEZXRhaWwiLCJ0cmFuc2l0aW9uIiwiZGVzdHJveURldGFpbCIsIm9uUHJlbG9hZGVkIiwib25QYWdlQ2hhbmdlRW5kIiwib25QYWdlQ2hhbmdlU3RhcnQiLCJ1cmwiLCJoaWRlIiwiZnJvbUNvbGxlY3Rpb25zVG9EZXRhaWwiLCJpbmRleE9mIiwiZnJvbURldGFpbFRvQ29sbGVjdGlvbnMiLCJUcmFuc2l0aW9uIiwic2V0RWxlbWVudCIsInNldFNpemUiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJwZXJzcGVjdGl2ZSIsImFzcGVjdCIsImZvdiIsIk1hdGgiLCJQSSIsImhlaWdodCIsInRhbiIsIndpZHRoIiwidmFsdWVzIiwib25Ub3VjaERvd24iLCJldmVudCIsImlzRG93biIsInRvdWNoZXMiLCJjbGllbnRYIiwiY2xpZW50WSIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInVwZGF0ZSIsInNjcm9sbCIsInJlbmRlciIsImdlb21ldHJ5IiwiUGxhbmUiLCJleHRyYSIsImNyZWF0ZVByb2dyYW0iLCJ0ZXh0dXJlIiwicHJvZ3JhbSIsIlByb2dyYW0iLCJmcmFnbWVudCIsInZlcnRleCIsInVuaWZvcm1zIiwidUFscGhhIiwidmFsdWUiLCJ0TWFwIiwiY3JlYXRlTWVzaCIsIm1lc2giLCJNZXNoIiwic2NhbGUiLCJzZXRQYXJlbnQiLCJlbGVtZW50IiwiaW5kZXgiLCJtZWRpYXMiLCJtZWRpYSIsImFuaW1hdGUiLCJjYWxsYmFjayIsInRpbWVsaW5lIiwiR1NBUCIsIm9uQ29tcGxldGUiLCJ0byIsImR1cmF0aW9uIiwiZWFzZSIsImNhbGwiLCJfIiwicmVtb3ZlQ2hpbGQiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=