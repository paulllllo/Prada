/*! For license information please see main.66a27a6a7bf7b0638846.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateprada("main",{"./styles/index.scss":(t,s,e)=>{e.r(s);var i=e("./node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js")(t.id,{publicPath:"",locals:!1});t.hot.dispose(i),t.hot.accept(void 0,i)},"./app/components/Canvas/Collections/index.js":(t,s,e)=>{e.r(s),e.d(s,{default:()=>a});var i=e("./node_modules/ogl/src/core/Transform.js"),l=e("./node_modules/ogl/src/extras/Plane.js"),r=e("./app/components/Canvas/Collections/Media.js"),o=e("./node_modules/lodash/lodash.js"),n=e("./node_modules/gsap/index.js"),c=e("./node_modules/prefix/index.js");class a{constructor({gl:t,scene:s,sizes:e,transition:l}){this.id="collections",this.gl=t,this.scene=s,this.sizes=e,this.transition=l,this.group=new i.Transform,this.transformPrefix=c("transform"),this.mediaElements=document.querySelectorAll(".collections_gallery_media"),this.collectionArticles=document.querySelectorAll(".collections_article"),this.galleryElement=document.querySelector(".collections_gallery"),this.galleryWrapperElement=document.querySelector(".collections_gallery_wrapper"),this.titlesElement=document.querySelector(".collections_titles"),this.activeFocusClass="collections_article--active",this.scroll={current:0,target:0,start:0,velocity:.5,lerp:.1},this.createGeometry(),this.createGallery(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new l.Plane(this.gl)}createGallery(){this.medias=(0,o.map)(this.mediaElements,((t,s)=>new r.default({element:t,geometry:this.geometry,gl:this.gl,scene:this.group,sizes:this.sizes,index:s})))}show(){(0,o.map)(this.medias,(t=>{t.show()})),this.transition&&this.transition.animate(medi)}hide(){(0,o.map)(this.medias,(t=>{t.hide()}))}onResize(t){this.scroll.current=0,this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.sizes=t.sizes,this.width=this.bounds.width/window.innerWidth*this.sizes.width,this.scroll.start=this.scroll.target=0,(0,o.map)(this.medias,(s=>s.onResize(t,this.scroll.current))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:t,y:s}){this.scroll.start=this.scroll.current}onTouchMove({x:t,y:s}){const e=t.start-t.end;this.scroll.target=this.scroll.start-e}onTouchUp({x:t,y:s}){}onWheel({pixelY:t}){this.scroll.target+=t}onChangeFocus(t){this.index=t;const s=parseInt(this.mediaElements[this.index].getAttribute("data-index"));(0,o.map)(this.collectionArticles,((t,e)=>{e===s?t.classList.add(this.activeFocusClass):t.classList.remove(this.activeFocusClass)})),this.titlesElement.style[this.transformPrefix]=`translateY(${70*s}%) translate(-50%, -50%) rotate(-90deg)`}update(){if(!this.bounds)return;this.scroll.target=n.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=n.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.galleryElement.style[this.transformPrefix]=`translateX(${this.scroll.current}px)`,this.scroll.start<this.scroll.current?this.direction="right":this.scroll.start>this.scroll.current&&(this.direction="left"),this.scroll.start=this.scroll.current;const t=Math.floor(Math.abs(this.scroll.current/this.scroll.limit)*this.medias.length);this.index!==t&&this.onChangeFocus(t),(0,o.map)(this.medias,((t,s)=>{t.update(this.scroll.current,this.index)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(t){t.h=()=>"47d507a16f824466e8d6"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSzZCLFFBQVVBLEdBR2Y3QixLQUFLcUQsY0FBY3hCLElBR3ZCRixFQUFBQSxFQUFBQSxLQUFJM0IsS0FBSzBCLFFBQVEsQ0FBQ0ssRUFBT0YsS0FDckJFLEVBQU0rQixPQUFPOUQsS0FBS2MsT0FBT0MsUUFBU2YsS0FBSzZCLE1BQU0sR0FFckQsQ0FHQTJDLE9BQUFBLEdBQ0l4RSxLQUFLSCxNQUFNNEUsWUFBWXpFLEtBQUtDLE1BQ2hDLGtCQ3JLSnlFLEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFkYS8uL3N0eWxlcy9pbmRleC5zY3NzP2YwZmYiLCJ3ZWJwYWNrOi8vcHJhZGEvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvQ29sbGVjdGlvbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhZGEvd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9O1xuICAgIGlmKG1vZHVsZS5ob3QpIHtcbiAgICAgIC8vIDE3MjM3MTYyOTU4NzJcbiAgICAgIHZhciBjc3NSZWxvYWQgPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvaG1yL2hvdE1vZHVsZVJlcGxhY2VtZW50LmpzXCIpKG1vZHVsZS5pZCwge1wicHVibGljUGF0aFwiOlwiXCIsXCJsb2NhbHNcIjpmYWxzZX0pO1xuICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGNzc1JlbG9hZCk7XG4gICAgICBtb2R1bGUuaG90LmFjY2VwdCh1bmRlZmluZWQsIGNzc1JlbG9hZCk7XG4gICAgfVxuICAiLCJpbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IE1lZGlhIGZyb20gJy4vTWVkaWEuanMnXG5pbXBvcnQgeyBtYXAgfSBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgR1NBUCBmcm9tICdnc2FwJ1xuaW1wb3J0IFByZWZpeCBmcm9tICdwcmVmaXgnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxlY3Rpb25zIHtcbiAgICBjb25zdHJ1Y3RvciAoeyBnbCwgc2NlbmUsIHNpemVzLCB0cmFuc2l0aW9uIH0pIHtcbiAgICAgICAgdGhpcy5pZCA9ICdjb2xsZWN0aW9ucydcblxuICAgICAgICB0aGlzLmdsID0gZ2xcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lXG4gICAgICAgIHRoaXMuc2l6ZXMgPSBzaXplc1xuICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uXG5cbiAgICAgICAgdGhpcy5ncm91cCA9IG5ldyBUcmFuc2Zvcm0oKVxuXG4gICAgICAgIHRoaXMudHJhbnNmb3JtUHJlZml4ID0gUHJlZml4KCd0cmFuc2Zvcm0nKVxuXG4gICAgICAgIHRoaXMubWVkaWFFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xsZWN0aW9uc19nYWxsZXJ5X21lZGlhJylcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uQXJ0aWNsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sbGVjdGlvbnNfYXJ0aWNsZScpXG5cbiAgICAgICAgdGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uc19nYWxsZXJ5JylcbiAgICAgICAgdGhpcy5nYWxsZXJ5V3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbnNfZ2FsbGVyeV93cmFwcGVyJylcblxuICAgICAgICB0aGlzLnRpdGxlc0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbnNfdGl0bGVzJylcblxuICAgICAgICB0aGlzLmFjdGl2ZUZvY3VzQ2xhc3MgPSAnY29sbGVjdGlvbnNfYXJ0aWNsZS0tYWN0aXZlJ1xuXG4gICAgICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgICAgICAgY3VycmVudDogMCxcbiAgICAgICAgICAgIHRhcmdldDogMCxcbiAgICAgICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICAgICAgdmVsb2NpdHk6IDAuNSxcbiAgICAgICAgICAgIGxlcnA6IDAuMVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jcmVhdGVHZW9tZXRyeSgpXG4gICAgICAgIHRoaXMuY3JlYXRlR2FsbGVyeSgpXG5cbiAgICAgICAgdGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcblxuICAgICAgICB0aGlzLnNob3coKVxuICAgIH1cblxuICAgIGNyZWF0ZUdlb21ldHJ5ICgpIHtcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBQbGFuZSh0aGlzLmdsKVxuICAgIH1cblxuICAgIGNyZWF0ZUdhbGxlcnkgKCkge1xuICAgICAgICB0aGlzLm1lZGlhcyA9IG1hcCh0aGlzLm1lZGlhRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZWRpYSh7XG4gICAgICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW9tZXRyeSxcbiAgICAgICAgICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgICAgICAgICBzY2VuZTogdGhpcy5ncm91cCxcbiAgICAgICAgICAgICAgICBzaXplczogdGhpcy5zaXplcyxcbiAgICAgICAgICAgICAgICBpbmRleFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyAgICAgICAgICBTaG93XG4gICAgc2hvdyAoKSB7XG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiB7XG4gICAgICAgICAgICBtZWRpYS5zaG93KClcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbil7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24uYW5pbWF0ZShtZWRpKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGlkZSAoKSB7XG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiB7XG4gICAgICAgICAgICBtZWRpYS5oaWRlKClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyAgICAgICAgICAgICAgICAgICBFdmVudHNcblxuICAgIG9uUmVzaXplIChldmVudCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnSG9tZSBvblJlc2l6ZSgpJylcbiAgICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IDBcblxuICAgICAgICB0aGlzLmJvdW5kcyA9IHRoaXMuZ2FsbGVyeVdyYXBwZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICAgICAgdGhpcy5zaXplcyA9IGV2ZW50LnNpemVzXG5cbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuYm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGggKiB0aGlzLnNpemVzLndpZHRoXG5cbiAgICAgICAgdGhpcy5zY3JvbGwuc3RhcnQgPSB0aGlzLnNjcm9sbC50YXJnZXQgPSAwXG5cbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5vblJlc2l6ZShldmVudCwgdGhpcy5zY3JvbGwuY3VycmVudCkpXG5cbiAgICAgICAgdGhpcy5zY3JvbGwubGltaXQgPSB0aGlzLmJvdW5kcy53aWR0aCAtIHRoaXMubWVkaWFzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGhcbiAgICB9XG5cbiAgICBvblRvdWNoRG93biAoeyB4LCB5IH0pIHtcbiAgICAgICAgdGhpcy5zY3JvbGwuc3RhcnQgPSB0aGlzLnNjcm9sbC5jdXJyZW50XG4gICAgfVxuXG4gICAgb25Ub3VjaE1vdmUgKHsgeCwgeSB9KSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG5cbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwuc3RhcnQgLSBkaXN0YW5jZVxuICAgIH1cblxuICAgIG9uVG91Y2hVcCAoeyB4LCB5IH0pIHt9XG5cbiAgICBvbldoZWVsICh7IHBpeGVsWSB9KSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCArPSBwaXhlbFlcbiAgICB9XG5cbiAgICBvbkNoYW5nZUZvY3VzIChpbmRleCkge1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXhcblxuICAgICAgICBjb25zdCBzZWxlY3RlZENvbGxlY3Rpb24gPSBwYXJzZUludCh0aGlzLm1lZGlhRWxlbWVudHNbdGhpcy5pbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JykpXG5cbiAgICAgICAgLy8gbWFwIHRocm91Z2ggYWxsIGNvbGxlY3Rpb24gaW5mb3JtYXRpb25cbiAgICAgICAgLy8gYWRkIHNob3cgY2xhc3MgdG8gZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIHNlbGVjdGVkQ29sbGVjdGlvbiBpbmRleFxuICAgICAgICBtYXAodGhpcy5jb2xsZWN0aW9uQXJ0aWNsZXMsIChlbGVtZW50LCBlbGVtZW50SW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50SW5kZXggPT09IHNlbGVjdGVkQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmFjdGl2ZUZvY3VzQ2xhc3MpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmFjdGl2ZUZvY3VzQ2xhc3MpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy50aXRsZXNFbGVtZW50LnN0eWxlW3RoaXMudHJhbnNmb3JtUHJlZml4XSA9IGB0cmFuc2xhdGVZKCR7NzAgKiBzZWxlY3RlZENvbGxlY3Rpb259JSkgdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgtOTBkZWcpYFxuICAgIH1cblxuICAgIC8vICAgICAgICAgIExvb3BcbiAgICB1cGRhdGUgKCkge1xuICAgICAgICBpZiAoIXRoaXMuYm91bmRzKSByZXR1cm5cblxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgPSBHU0FQLnV0aWxzLmNsYW1wKC10aGlzLnNjcm9sbC5saW1pdCwgMCwgdGhpcy5zY3JvbGwudGFyZ2V0KVxuXG4gICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc2Nyb2xsLmN1cnJlbnQsIHRoaXMuc2Nyb2xsLnRhcmdldCwgdGhpcy5zY3JvbGwubGVycClcblxuICAgICAgICB0aGlzLmdhbGxlcnlFbGVtZW50LnN0eWxlW3RoaXMudHJhbnNmb3JtUHJlZml4XSA9IGB0cmFuc2xhdGVYKCR7dGhpcy5zY3JvbGwuY3VycmVudH1weClgXG5cbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsLnN0YXJ0IDwgdGhpcy5zY3JvbGwuY3VycmVudCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAncmlnaHQnXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGwuc3RhcnQgPiB0aGlzLnNjcm9sbC5jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdsZWZ0J1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zY3JvbGwuc3RhcnQgPSB0aGlzLnNjcm9sbC5jdXJyZW50XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGguYWJzKHRoaXMuc2Nyb2xsLmN1cnJlbnQgLyB0aGlzLnNjcm9sbC5saW1pdCkgKiB0aGlzLm1lZGlhcy5sZW5ndGgpXG5cbiAgICAgICAgaWYgKHRoaXMuaW5kZXggIT09IGluZGV4KSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleClcblxuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZUZvY3VzKGluZGV4KVxuICAgICAgICB9XG5cbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5pbmRleClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyAgICAgICAgICBEZXN0cm95XG4gICAgZGVzdHJveSAoKSB7XG4gICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlQ2hpbGQodGhpcy5ncm91cClcbiAgICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI0N2Q1MDdhMTZmODI0NDY2ZThkNlwiKSJdLCJuYW1lcyI6WyJjc3NSZWxvYWQiLCJtb2R1bGUiLCJpZCIsImhvdCIsImRpc3Bvc2UiLCJhY2NlcHQiLCJ1bmRlZmluZWQiLCJDb2xsZWN0aW9ucyIsImNvbnN0cnVjdG9yIiwiZ2wiLCJzY2VuZSIsInNpemVzIiwidHJhbnNpdGlvbiIsInRoaXMiLCJncm91cCIsIlRyYW5zZm9ybSIsInRyYW5zZm9ybVByZWZpeCIsIlByZWZpeCIsIm1lZGlhRWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb2xsZWN0aW9uQXJ0aWNsZXMiLCJnYWxsZXJ5RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnYWxsZXJ5V3JhcHBlckVsZW1lbnQiLCJ0aXRsZXNFbGVtZW50IiwiYWN0aXZlRm9jdXNDbGFzcyIsInNjcm9sbCIsImN1cnJlbnQiLCJ0YXJnZXQiLCJzdGFydCIsInZlbG9jaXR5IiwibGVycCIsImNyZWF0ZUdlb21ldHJ5IiwiY3JlYXRlR2FsbGVyeSIsInNldFBhcmVudCIsInNob3ciLCJnZW9tZXRyeSIsIlBsYW5lIiwibWVkaWFzIiwibWFwIiwiZWxlbWVudCIsImluZGV4IiwiTWVkaWEiLCJtZWRpYSIsImFuaW1hdGUiLCJtZWRpIiwiaGlkZSIsIm9uUmVzaXplIiwiZXZlbnQiLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJsaW1pdCIsImNsaWVudFdpZHRoIiwib25Ub3VjaERvd24iLCJ4IiwieSIsIm9uVG91Y2hNb3ZlIiwiZGlzdGFuY2UiLCJlbmQiLCJvblRvdWNoVXAiLCJvbldoZWVsIiwicGl4ZWxZIiwib25DaGFuZ2VGb2N1cyIsInNlbGVjdGVkQ29sbGVjdGlvbiIsInBhcnNlSW50IiwiZ2V0QXR0cmlidXRlIiwiZWxlbWVudEluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic3R5bGUiLCJ1cGRhdGUiLCJHU0FQIiwidXRpbHMiLCJjbGFtcCIsImludGVycG9sYXRlIiwiZGlyZWN0aW9uIiwiTWF0aCIsImZsb29yIiwiYWJzIiwibGVuZ3RoIiwiZGVzdHJveSIsInJlbW92ZUNoaWxkIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9