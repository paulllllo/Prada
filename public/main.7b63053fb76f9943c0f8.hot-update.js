/*! For license information please see main.7b63053fb76f9943c0f8.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateprada("main",{"./styles/index.scss":(t,s,e)=>{e.r(s);var i=e("./node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js")(t.id,{publicPath:"",locals:!1});t.hot.dispose(i),t.hot.accept(void 0,i)},"./app/components/Canvas/Collections/index.js":(t,s,e)=>{e.r(s),e.d(s,{default:()=>a});var i=e("./node_modules/ogl/src/core/Transform.js"),l=e("./node_modules/ogl/src/extras/Plane.js"),r=e("./app/components/Canvas/Collections/Media.js"),o=e("./node_modules/lodash/lodash.js"),n=e("./node_modules/gsap/index.js"),c=e("./node_modules/prefix/index.js");class a{constructor({gl:t,scene:s,sizes:e,transition:l}){this.id="collections",this.gl=t,this.scene=s,this.sizes=e,this.transition=l,this.group=new i.Transform,this.transformPrefix=c("transform"),this.mediaElements=document.querySelectorAll(".collections_gallery_media"),this.collectionArticles=document.querySelectorAll(".collections_article"),this.galleryElement=document.querySelector(".collections_gallery"),this.galleryWrapperElement=document.querySelector(".collections_gallery_wrapper"),this.titlesElement=document.querySelector(".collections_titles"),this.activeFocusClass="collections_article--active",this.scroll={current:0,target:0,start:0,velocity:.5,lerp:.1},this.createGeometry(),this.createGallery(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new l.Plane(this.gl)}createGallery(){this.medias=(0,o.map)(this.mediaElements,((t,s)=>new r.default({element:t,geometry:this.geometry,gl:this.gl,scene:this.group,sizes:this.sizes,index:s})))}show(){(0,o.map)(this.medias,(t=>{t.show()})),this.transition&&this.transition.animate(this.medias[0].mesh,(t=>{}))}hide(){(0,o.map)(this.medias,(t=>{t.hide()}))}onResize(t){this.scroll.current=0,this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.sizes=t.sizes,this.width=this.bounds.width/window.innerWidth*this.sizes.width,this.scroll.start=this.scroll.target=0,(0,o.map)(this.medias,(s=>s.onResize(t,this.scroll.current))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:t,y:s}){this.scroll.start=this.scroll.current}onTouchMove({x:t,y:s}){const e=t.start-t.end;this.scroll.target=this.scroll.start-e}onTouchUp({x:t,y:s}){}onWheel({pixelY:t}){this.scroll.target+=t}onChangeFocus(t){this.index=t;const s=parseInt(this.mediaElements[this.index].getAttribute("data-index"));(0,o.map)(this.collectionArticles,((t,e)=>{e===s?t.classList.add(this.activeFocusClass):t.classList.remove(this.activeFocusClass)})),this.titlesElement.style[this.transformPrefix]=`translateY(${70*s}%) translate(-50%, -50%) rotate(-90deg)`}update(){if(!this.bounds)return;this.scroll.target=n.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=n.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.galleryElement.style[this.transformPrefix]=`translateX(${this.scroll.current}px)`,this.scroll.start<this.scroll.current?this.direction="right":this.scroll.start>this.scroll.current&&(this.direction="left"),this.scroll.start=this.scroll.current;const t=Math.floor(Math.abs(this.scroll.current/this.scroll.limit)*this.medias.length);this.index!==t&&this.onChangeFocus(t),(0,o.map)(this.medias,((t,s)=>{t.update(this.scroll.current,this.index)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(t){t.h=()=>"c8620189fe1e44ecec44"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UzNDLEtBQUswQixPQUFPOEMsUUFFckZ4RSxLQUFLNkIsUUFBVUEsR0FHZjdCLEtBQUtzRCxjQUFjekIsSUFHdkJGLEVBQUFBLEVBQUFBLEtBQUkzQixLQUFLMEIsUUFBUSxDQUFDSyxFQUFPRixLQUNyQkUsRUFBTWdDLE9BQU8vRCxLQUFLYyxPQUFPQyxRQUFTZixLQUFLNkIsTUFBTSxHQUVyRCxDQUdBNEMsT0FBQUEsR0FDSXpFLEtBQUtILE1BQU02RSxZQUFZMUUsS0FBS0MsTUFDaEMsa0JDdktKMEUsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWRhLy4vc3R5bGVzL2luZGV4LnNjc3M/ZjBmZiIsIndlYnBhY2s6Ly9wcmFkYS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Db2xsZWN0aW9ucy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFkYS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307XG4gICAgaWYobW9kdWxlLmhvdCkge1xuICAgICAgLy8gMTcyMzcxNjQxNzE5MVxuICAgICAgdmFyIGNzc1JlbG9hZCA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9obXIvaG90TW9kdWxlUmVwbGFjZW1lbnQuanNcIikobW9kdWxlLmlkLCB7XCJwdWJsaWNQYXRoXCI6XCJcIixcImxvY2Fsc1wiOmZhbHNlfSk7XG4gICAgICBtb2R1bGUuaG90LmRpc3Bvc2UoY3NzUmVsb2FkKTtcbiAgICAgIG1vZHVsZS5ob3QuYWNjZXB0KHVuZGVmaW5lZCwgY3NzUmVsb2FkKTtcbiAgICB9XG4gICIsImltcG9ydCB7IFBsYW5lLCBUcmFuc2Zvcm0gfSBmcm9tICdvZ2wnXG5pbXBvcnQgTWVkaWEgZnJvbSAnLi9NZWRpYS5qcydcbmltcG9ydCB7IG1hcCB9IGZyb20gJ2xvZGFzaCdcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5pbXBvcnQgUHJlZml4IGZyb20gJ3ByZWZpeCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sbGVjdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yICh7IGdsLCBzY2VuZSwgc2l6ZXMsIHRyYW5zaXRpb24gfSkge1xuICAgICAgICB0aGlzLmlkID0gJ2NvbGxlY3Rpb25zJ1xuXG4gICAgICAgIHRoaXMuZ2wgPSBnbFxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmVcbiAgICAgICAgdGhpcy5zaXplcyA9IHNpemVzXG4gICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25cblxuICAgICAgICB0aGlzLmdyb3VwID0gbmV3IFRyYW5zZm9ybSgpXG5cbiAgICAgICAgdGhpcy50cmFuc2Zvcm1QcmVmaXggPSBQcmVmaXgoJ3RyYW5zZm9ybScpXG5cbiAgICAgICAgdGhpcy5tZWRpYUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbGxlY3Rpb25zX2dhbGxlcnlfbWVkaWEnKVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25BcnRpY2xlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xsZWN0aW9uc19hcnRpY2xlJylcblxuICAgICAgICB0aGlzLmdhbGxlcnlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbGxlY3Rpb25zX2dhbGxlcnknKVxuICAgICAgICB0aGlzLmdhbGxlcnlXcmFwcGVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uc19nYWxsZXJ5X3dyYXBwZXInKVxuXG4gICAgICAgIHRoaXMudGl0bGVzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uc190aXRsZXMnKVxuXG4gICAgICAgIHRoaXMuYWN0aXZlRm9jdXNDbGFzcyA9ICdjb2xsZWN0aW9uc19hcnRpY2xlLS1hY3RpdmUnXG5cbiAgICAgICAgdGhpcy5zY3JvbGwgPSB7XG4gICAgICAgICAgICBjdXJyZW50OiAwLFxuICAgICAgICAgICAgdGFyZ2V0OiAwLFxuICAgICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgICB2ZWxvY2l0eTogMC41LFxuICAgICAgICAgICAgbGVycDogMC4xXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNyZWF0ZUdlb21ldHJ5KClcbiAgICAgICAgdGhpcy5jcmVhdGVHYWxsZXJ5KClcblxuICAgICAgICB0aGlzLmdyb3VwLnNldFBhcmVudCh0aGlzLnNjZW5lKVxuXG4gICAgICAgIHRoaXMuc2hvdygpXG4gICAgfVxuXG4gICAgY3JlYXRlR2VvbWV0cnkgKCkge1xuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wpXG4gICAgfVxuXG4gICAgY3JlYXRlR2FsbGVyeSAoKSB7XG4gICAgICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFFbGVtZW50cywgKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lZGlhKHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxuICAgICAgICAgICAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgICAgICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxuICAgICAgICAgICAgICAgIHNpemVzOiB0aGlzLnNpemVzLFxuICAgICAgICAgICAgICAgIGluZGV4XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vICAgICAgICAgIFNob3dcbiAgICBzaG93ICgpIHtcbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEpID0+IHtcbiAgICAgICAgICAgIG1lZGlhLnNob3coKVxuICAgICAgICB9KVxuICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uKXtcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbi5hbmltYXRlKHRoaXMubWVkaWFzWzBdLm1lc2gsIF8gPT4ge1xuXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGlkZSAoKSB7XG4gICAgICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiB7XG4gICAgICAgICAgICBtZWRpYS5oaWRlKClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyAgICAgICAgICAgICAgICAgICBFdmVudHNcblxuICAgIG9uUmVzaXplIChldmVudCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnSG9tZSBvblJlc2l6ZSgpJylcbiAgICAgICAgdGhpcy5zY3JvbGwuY3VycmVudCA9IDBcblxuICAgICAgICB0aGlzLmJvdW5kcyA9IHRoaXMuZ2FsbGVyeVdyYXBwZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICAgICAgdGhpcy5zaXplcyA9IGV2ZW50LnNpemVzXG5cbiAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMuYm91bmRzLndpZHRoIC8gd2luZG93LmlubmVyV2lkdGggKiB0aGlzLnNpemVzLndpZHRoXG5cbiAgICAgICAgdGhpcy5zY3JvbGwuc3RhcnQgPSB0aGlzLnNjcm9sbC50YXJnZXQgPSAwXG5cbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCBtZWRpYSA9PiBtZWRpYS5vblJlc2l6ZShldmVudCwgdGhpcy5zY3JvbGwuY3VycmVudCkpXG5cbiAgICAgICAgdGhpcy5zY3JvbGwubGltaXQgPSB0aGlzLmJvdW5kcy53aWR0aCAtIHRoaXMubWVkaWFzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGhcbiAgICB9XG5cbiAgICBvblRvdWNoRG93biAoeyB4LCB5IH0pIHtcbiAgICAgICAgdGhpcy5zY3JvbGwuc3RhcnQgPSB0aGlzLnNjcm9sbC5jdXJyZW50XG4gICAgfVxuXG4gICAgb25Ub3VjaE1vdmUgKHsgeCwgeSB9KSB7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG5cbiAgICAgICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwuc3RhcnQgLSBkaXN0YW5jZVxuICAgIH1cblxuICAgIG9uVG91Y2hVcCAoeyB4LCB5IH0pIHt9XG5cbiAgICBvbldoZWVsICh7IHBpeGVsWSB9KSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsLnRhcmdldCArPSBwaXhlbFlcbiAgICB9XG5cbiAgICBvbkNoYW5nZUZvY3VzIChpbmRleCkge1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXhcblxuICAgICAgICBjb25zdCBzZWxlY3RlZENvbGxlY3Rpb24gPSBwYXJzZUludCh0aGlzLm1lZGlhRWxlbWVudHNbdGhpcy5pbmRleF0uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JykpXG5cbiAgICAgICAgLy8gbWFwIHRocm91Z2ggYWxsIGNvbGxlY3Rpb24gaW5mb3JtYXRpb25cbiAgICAgICAgLy8gYWRkIHNob3cgY2xhc3MgdG8gZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIHNlbGVjdGVkQ29sbGVjdGlvbiBpbmRleFxuICAgICAgICBtYXAodGhpcy5jb2xsZWN0aW9uQXJ0aWNsZXMsIChlbGVtZW50LCBlbGVtZW50SW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50SW5kZXggPT09IHNlbGVjdGVkQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmFjdGl2ZUZvY3VzQ2xhc3MpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmFjdGl2ZUZvY3VzQ2xhc3MpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy50aXRsZXNFbGVtZW50LnN0eWxlW3RoaXMudHJhbnNmb3JtUHJlZml4XSA9IGB0cmFuc2xhdGVZKCR7NzAgKiBzZWxlY3RlZENvbGxlY3Rpb259JSkgdHJhbnNsYXRlKC01MCUsIC01MCUpIHJvdGF0ZSgtOTBkZWcpYFxuICAgIH1cblxuICAgIC8vICAgICAgICAgIExvb3BcbiAgICB1cGRhdGUgKCkge1xuICAgICAgICBpZiAoIXRoaXMuYm91bmRzKSByZXR1cm5cblxuICAgICAgICB0aGlzLnNjcm9sbC50YXJnZXQgPSBHU0FQLnV0aWxzLmNsYW1wKC10aGlzLnNjcm9sbC5saW1pdCwgMCwgdGhpcy5zY3JvbGwudGFyZ2V0KVxuXG4gICAgICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc2Nyb2xsLmN1cnJlbnQsIHRoaXMuc2Nyb2xsLnRhcmdldCwgdGhpcy5zY3JvbGwubGVycClcblxuICAgICAgICB0aGlzLmdhbGxlcnlFbGVtZW50LnN0eWxlW3RoaXMudHJhbnNmb3JtUHJlZml4XSA9IGB0cmFuc2xhdGVYKCR7dGhpcy5zY3JvbGwuY3VycmVudH1weClgXG5cbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsLnN0YXJ0IDwgdGhpcy5zY3JvbGwuY3VycmVudCkge1xuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAncmlnaHQnXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGwuc3RhcnQgPiB0aGlzLnNjcm9sbC5jdXJyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICdsZWZ0J1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zY3JvbGwuc3RhcnQgPSB0aGlzLnNjcm9sbC5jdXJyZW50XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKE1hdGguYWJzKHRoaXMuc2Nyb2xsLmN1cnJlbnQgLyB0aGlzLnNjcm9sbC5saW1pdCkgKiB0aGlzLm1lZGlhcy5sZW5ndGgpXG5cbiAgICAgICAgaWYgKHRoaXMuaW5kZXggIT09IGluZGV4KSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpbmRleClcblxuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZUZvY3VzKGluZGV4KVxuICAgICAgICB9XG5cbiAgICAgICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBtZWRpYS51cGRhdGUodGhpcy5zY3JvbGwuY3VycmVudCwgdGhpcy5pbmRleClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyAgICAgICAgICBEZXN0cm95XG4gICAgZGVzdHJveSAoKSB7XG4gICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlQ2hpbGQodGhpcy5ncm91cClcbiAgICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCJjODYyMDE4OWZlMWU0NGVjZWM0NFwiKSJdLCJuYW1lcyI6WyJjc3NSZWxvYWQiLCJtb2R1bGUiLCJpZCIsImhvdCIsImRpc3Bvc2UiLCJhY2NlcHQiLCJ1bmRlZmluZWQiLCJDb2xsZWN0aW9ucyIsImNvbnN0cnVjdG9yIiwiZ2wiLCJzY2VuZSIsInNpemVzIiwidHJhbnNpdGlvbiIsInRoaXMiLCJncm91cCIsIlRyYW5zZm9ybSIsInRyYW5zZm9ybVByZWZpeCIsIlByZWZpeCIsIm1lZGlhRWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb2xsZWN0aW9uQXJ0aWNsZXMiLCJnYWxsZXJ5RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnYWxsZXJ5V3JhcHBlckVsZW1lbnQiLCJ0aXRsZXNFbGVtZW50IiwiYWN0aXZlRm9jdXNDbGFzcyIsInNjcm9sbCIsImN1cnJlbnQiLCJ0YXJnZXQiLCJzdGFydCIsInZlbG9jaXR5IiwibGVycCIsImNyZWF0ZUdlb21ldHJ5IiwiY3JlYXRlR2FsbGVyeSIsInNldFBhcmVudCIsInNob3ciLCJnZW9tZXRyeSIsIlBsYW5lIiwibWVkaWFzIiwibWFwIiwiZWxlbWVudCIsImluZGV4IiwiTWVkaWEiLCJtZWRpYSIsImFuaW1hdGUiLCJtZXNoIiwiXyIsImhpZGUiLCJvblJlc2l6ZSIsImV2ZW50IiwiYm91bmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwibGltaXQiLCJjbGllbnRXaWR0aCIsIm9uVG91Y2hEb3duIiwieCIsInkiLCJvblRvdWNoTW92ZSIsImRpc3RhbmNlIiwiZW5kIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWSIsIm9uQ2hhbmdlRm9jdXMiLCJzZWxlY3RlZENvbGxlY3Rpb24iLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImVsZW1lbnRJbmRleCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInN0eWxlIiwidXBkYXRlIiwiR1NBUCIsInV0aWxzIiwiY2xhbXAiLCJpbnRlcnBvbGF0ZSIsImRpcmVjdGlvbiIsIk1hdGgiLCJmbG9vciIsImFicyIsImxlbmd0aCIsImRlc3Ryb3kiLCJyZW1vdmVDaGlsZCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==